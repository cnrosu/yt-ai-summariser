<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="style.css" />
</head>
<body style="width: 420px;">
  <h2>Settings</h2>

  <label for="apiKey">OpenAI API Key:</label>
  <input type="text" id="apiKey" placeholder="sk-..." />

  <label for="modelSelect">Choose AI Model:</label>
  <select id="modelSelect">
    <option value="gpt-4o">GPT-4o</option>
    <option value="gpt-4">GPT-4</option>
    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
  </select>

  <button id="saveSettings">Save</button>
  <span id="statusMsg" style="margin-left:10px;color:green;display:none;">Saved!</span>

  <script>
  const modelSelect = document.getElementById("modelSelect");
  const apiKeyInput = document.getElementById("apiKey");

  chrome.storage.sync.get(["model", "apiKey"], (res) => {
    if (res.model) {
      modelSelect.value = res.model;
    }
    if (res.apiKey) {
      apiKeyInput.value = res.apiKey;
    }
  });

    document.getElementById("saveSettings").addEventListener("click", () => {
    const selectedModel = modelSelect.value;
    const apiKey = apiKeyInput.value.trim();
    chrome.storage.sync.set({ model: selectedModel, apiKey }, () => {
      alert("Settings saved.");
    });
  });
  </script>
</body>
</html>
